# 開発フローレシピ集

## レシピ1：新規プロジェクトの立ち上げ

### 手順

```bash
# 1. プロジェクトディレクトリを作成
mkdir my-project && cd my-project

# 2. 基本ファイルを作成（package.json等）
npm init -y

# 3. Claude Codeを起動
claude

# 4. 初期化コマンドを実行
> /init
```

### プロンプト例

```
Next.js + TypeScript + Tailwind CSS でプロジェクトを
セットアップしてください。

要件：
- App Router を使用
- ESLint + Prettier を設定
- 基本的なディレクトリ構造を作成
```

---

## レシピ2：GitHub Issueからのバグ修正フロー

### 手順

```bash
# 1. Claude Codeを起動
claude

# 2. カスタムコマンドでIssue修正を開始
> /project:fix-issue 42

# 3. AIが自動で：
#    - Issueを取得・分析
#    - ブランチ作成
#    - 修正実装
#    - PR作成
```

### 手動で進める場合

```
Issue #42 を修正します。

1. gh issue view 42 --comments でIssue内容を確認してください
2. 問題の原因を特定してください
3. 修正計画を提示してください（承認後に実装開始）
```

---

## レシピ3：機能追加の計画→実装フロー

### Phase 1: 計画（Planモード）

```
# Shift+Tab でPlanモードに切り替え

「ユーザーのプロフィール編集機能を追加したいです。

要件：
- 名前、メールアドレス、アバター画像を編集可能
- バリデーションあり
- 変更は即座にDBに反映

既存のコードベースを確認して、実装計画を立ててください。」
```

### Phase 2: 実装

```
# 計画を承認後、Shift+Tab でActモードに戻る

「計画に沿って実装を開始してください。
まずテストから書いて、TDD形式で進めてください。」
```

### Phase 3: レビュー・PR

```
/project:create-pr
```

---

## レシピ4：既存コードのリファクタリング

### 手順

```
# 1. 対象コードのレビューを依頼
「src/services/legacy-api.ts は3年前のコードで、
現在のコーディング規約に合っていません。

以下の観点でレビューしてください：
- TypeScriptの型定義
- エラーハンドリング
- 命名規則」

# 2. リファクタリング計画を確認
「レビュー結果をもとに、リファクタリング計画を立ててください。
既存の振る舞いを変えずに改善する方針で。」

# 3. 段階的に実装
「計画の1番目から実装してください。
各ステップでテストが通ることを確認しながら進めてください。」
```

---

## レシピ5：コードレビュー対応

### PRへのレビューコメント対応

```
# 1. レビューコメントを取得
「gh pr view 15 --comments と
gh api /repos/{owner}/{repo}/pulls/15/comments
を実行して、レビューコメントを整理してください。」

# 2. 対応を依頼
「レビューコメントを優先度順に対応してください。
- 重大な指摘 → 即修正
- 改善提案 → 検討して対応
- 軽微な指摘 → まとめて対応

対応が終わったら git push してください。」
```

---

## レシピ6：デバッグセッション

### エラーの調査

```
「以下のエラーが発生しています。原因を調査してください。

エラー：
TypeError: Cannot read property 'id' of undefined
  at processOrder (src/services/order.ts:45:12)

再現手順：
1. 商品をカートに追加
2. 決済画面に進む
3. 決済ボタンをクリック

関連ファイルを読み込んで、考えられる原因を列挙してください。」
```

### 修正と検証

```
「原因が特定できたら、修正を実装してください。
修正後、以下を確認：
1. 元のエラーが解消されること
2. 既存のテストがすべてパスすること
3. 新しいエッジケースのテストを追加」
```

---

## レシピ7：セキュリティ監査

### 定期監査

```
# カスタムコマンドを使用
> /project:security-check

# または手動で
「プロジェクト全体のセキュリティ監査を行ってください。

チェック項目：
1. 機密情報のハードコード
2. SQLインジェクション・XSSの可能性
3. 認証・認可の実装漏れ
4. npm audit の結果

重要度別にレポートを作成してください。」
```

---

## レシピ8：ドキュメント生成

### API仕様書の生成

```
「src/api/ 配下のすべてのエンドポイントを分析して、
API仕様書を生成してください。

形式：
- エンドポイント一覧（メソッド、パス、説明）
- 各エンドポイントの詳細（リクエスト/レスポンス例）
- 認証要件

docs/API.md に出力してください。」
```

---

## コンテキスト管理のベストプラクティス

### 長時間セッションの場合

```
# 1時間ごとに会話を圧縮
/compact

# タスク完了時に要約を残す
「ここまでの作業内容を要約して、次のセッションで
引き継げるようにCLAUDE.mdに追記してください。」
```

### 複数タスクを扱う場合

```
# タスクAが終わったら
/clear

# タスクBを新しく開始
「次のタスクを開始します。〇〇の実装をお願いします。」
```
